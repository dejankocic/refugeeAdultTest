{"version":3,"sources":["./src/core/features/user/pages/complete-profile/complete-profile.html","./src/core/features/user/pages/complete-profile/complete-profile.ts","./src/core/features/user/user-app-lazy.module.ts"],"names":[],"mappings":"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","file":"features-user-user-app-lazy-module.js","sourcesContent":["export default \"<ion-header>\\n    <ion-toolbar>\\n        <ion-buttons slot=\\\"start\\\">\\n            <ion-back-button [text]=\\\"'core.back' | translate\\\"></ion-back-button>\\n        </ion-buttons>\\n\\n        <ion-title>\\n            <h1 *ngIf=\\\"!editingProfile\\\">{{ 'core.user.completeyourprofile' | translate }}</h1>\\n            <h1 *ngIf=\\\"editingProfile\\\">{{ 'core.login.reconnecttosite' | translate }}</h1>\\n        </ion-title>\\n\\n        <ion-buttons slot=\\\"end\\\">\\n            <ion-button fill=\\\"clear\\\" (click)=\\\"showHelp()\\\" [attr.aria-label]=\\\"'core.help' | translate\\\">\\n                <ion-icon slot=\\\"icon-only\\\" name=\\\"far-question-circle\\\" aria-hidden=\\\"true\\\"></ion-icon>\\n            </ion-button>\\n        </ion-buttons>\\n    </ion-toolbar>\\n</ion-header>\\n<ion-content>\\n    <ion-list class=\\\"list-item-limited-width\\\">\\n        <ng-container *ngIf=\\\"!editingProfile\\\">\\n            <ion-item class=\\\"ion-text-wrap\\\">\\n                <ion-label>\\n                    <p>{{ 'core.user.completeprofilenotice' | translate }}</p>\\n                </ion-label>\\n            </ion-item>\\n            <ion-button class=\\\"ion-text-wrap ion-margin\\\" expand=\\\"block\\\" (click)=\\\"openCompleteProfilePage()\\\">\\n                {{ 'core.user.completeprofile' | translate }}\\n            </ion-button>\\n        </ng-container>\\n        <ng-container *ngIf=\\\"editingProfile\\\">\\n            <ion-item class=\\\"ion-text-wrap\\\">\\n                <ion-label>\\n                    <p>{{ 'core.user.completeprofilereconnectinstructions' | translate }}</p>\\n                </ion-label>\\n            </ion-item>\\n            <ion-button class=\\\"ion-text-wrap ion-margin\\\" expand=\\\"block\\\" (click)=\\\"login()\\\">\\n                {{ 'core.login.reconnect' | translate }}\\n            </ion-button>\\n        </ng-container>\\n        <ion-item class=\\\"ion-text-wrap\\\">\\n            <ion-label>\\n                <p>{{ 'core.wanttochangesite' | translate }}</p>\\n            </ion-label>\\n        </ion-item>\\n        <ion-button class=\\\"ion-text-wrap ion-margin\\\" expand=\\\"block\\\" fill=\\\"outline\\\" (click)=\\\"logout()\\\">\\n            {{ logoutLabel | translate }}\\n        </ion-button>\\n    </ion-list>\\n</ion-content>\\n\";","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { Component, OnDestroy } from '@angular/core';\n\nimport { CoreSites } from '@services/sites';\nimport { CoreLoginHelper } from '@features/login/services/login-helper';\nimport { Translate } from '@singletons';\nimport { CoreNavigator } from '@services/navigator';\nimport { CoreEventObserver, CoreEvents } from '@singletons/events';\nimport { CoreUtils } from '@services/utils/utils';\nimport { CoreUserSupport } from '@features/user/services/support';\n\n/**\n * Page that shows instructions to complete the profile.\n */\n@Component({\n    selector: 'page-core-user-complete-profile',\n    templateUrl: 'complete-profile.html',\n})\nexport class CoreUserCompleteProfilePage implements OnDestroy {\n\n    editingProfile = false;\n    logoutLabel: string;\n\n    protected urlLoadedObserver?: CoreEventObserver;\n    protected browserClosedObserver?: CoreEventObserver;\n\n    constructor() {\n        this.logoutLabel = CoreLoginHelper.getLogoutLabel();\n    }\n\n    /**\n     * Show help modal.\n     */\n    showHelp(): void {\n        CoreUserSupport.showHelp(\n            Translate.instant('core.user.completeprofilehelp'),\n            Translate.instant('core.user.completeprofilesupportsubject'),\n        );\n    }\n\n    /**\n     * Open the edit profile page in a browser.\n     */\n    openCompleteProfilePage(): void {\n        CoreLoginHelper.openInAppForEdit(\n            CoreSites.getCurrentSiteId(),\n            '/user/edit.php',\n            undefined,\n            true,\n        );\n        this.editingProfile = true;\n        this.detectProileEdited();\n    }\n\n    /**\n     * Login the user.\n     */\n    login(): void {\n        CoreNavigator.navigateToSiteHome();\n        this.editingProfile = false;\n    }\n\n    /**\n     * Logout the user.\n     */\n    logout(): void {\n        CoreSites.logout();\n        this.editingProfile = false;\n    }\n\n    /**\n     * Try to detect if the user edited the profile in browser.\n     */\n    detectProileEdited(): void {\n        if (this.urlLoadedObserver) {\n            // Already listening (shouldn't happen).\n            return;\n        }\n\n        this.urlLoadedObserver = CoreEvents.on(CoreEvents.IAB_LOAD_START, (event) => {\n            if (event.url.match(/\\/user\\/preferences.php/)) {\n                // Profile should be complete now.\n                CoreUtils.closeInAppBrowser();\n                this.login();\n            }\n        });\n\n        this.browserClosedObserver = CoreEvents.on(CoreEvents.IAB_EXIT, () => {\n            this.urlLoadedObserver?.off();\n            this.browserClosedObserver?.off();\n            delete this.urlLoadedObserver;\n            delete this.browserClosedObserver;\n        });\n    }\n\n    /**\n     * @inheritdoc\n     */\n    ngOnDestroy(): void {\n        this.urlLoadedObserver?.off();\n        this.browserClosedObserver?.off();\n    }\n\n}\n","// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nimport { CoreSharedModule } from '@/core/shared.module';\nimport { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { CoreUserCompleteProfilePage } from './pages/complete-profile/complete-profile';\n\nconst routes: Routes = [\n    {\n        path: 'completeprofile',\n        component: CoreUserCompleteProfilePage,\n    },\n];\n\n@NgModule({\n    imports: [\n        RouterModule.forChild(routes),\n        CoreSharedModule,\n    ],\n    declarations: [\n        CoreUserCompleteProfilePage,\n    ],\n    exports: [RouterModule],\n})\nexport class CoreUserAppLazyModule {}\n"],"sourceRoot":"webpack:///"}